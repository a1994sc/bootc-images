{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  extends: [
    "config:recommended",
    "helpers:pinGitHubActionDigests",
    ":gitSignOff",
  ],
  assignees: [
    "@A1994SC"
  ],
  dependencyDashboard: true,
  automerge: true,
  platformAutomerge: true,
  packageRules: [
    {
      matchPackageNames: [
        "quay.io/fedora/fedora",
        "quay.io/fedora/fedora-bootc",
      ],
      enabled: false,
    },
    {
      matchPackageNames: [
        "registry.redhat.io/rhel9/rhel-bootc",
        "registry.access.redhat.com/ubi9/ubi",
        "quay.io/almalinuxorg/9-base",
        "quay.io/almalinuxorg/almalinux-bootc",
      ],
      versioning: "regex:^(?<major>9)\\.(?<minor>\\d+)-(?<patch>\\d+)$",
      automerge: true,
      matchFileNames: [
        "el09/**",
        ".github/workflows/build_bootc_el09_alma.yml",
        ".github/workflows/build_bootc_el09_rhel.yml",
      ],
    },
    {
      matchPackageNames: [
        "registry.redhat.io/rhel10/rhel-bootc",
        "registry.access.redhat.com/ubi10/ubi",
        "quay.io/almalinuxorg/10-base",
        "quay.io/almalinuxorg/almalinux-bootc",
      ],
      versioning: "regex:^(?<major>10)\\.(?<minor>\\d+)-(?<patch>\\d+)$",
      automerge: true,
      matchFileNames: [
        "el10/**",
        ".github/workflows/build_bootc_el10_alma.yml",
        ".github/workflows/build_bootc_el10_rhel.yml",
      ],
    },
    {
      matchPackageNames: [
        "quay.io/rockylinux/rockylinux",
      ],
      versioning: "regex:^(?<major>9)\\.(?<minor>\\d+).(?<patch>\\d+)-ubi$",
      automerge: true,
      matchFileNames: [
        ".github/workflows/build_bootc_el09_rocky.yml",
      ],
    },
    {
      matchPackageNames: [
        "quay.io/rockylinux/rockylinux",
      ],
      versioning: "regex:^(?<major>10)\\.(?<minor>\\d+).(?<patch>\\d+)-ubi$",
      automerge: true,
      matchFileNames: [
        ".github/workflows/build_bootc_el10_rocky.yml",
      ],
    }
  ],
  customManagers: [
    {
      customType: "regex",
      managerFilePatterns: [
        "/Containerfile$/",
        "/.github/workflows/.+\\.ya?ml$/",
      ],
      matchStrings: [
        "FROM quay.io/fedora/fedora-bootc:(?<currentValue>\\S+)",
        " +image: quay.io/fedora/fedora:(?<currentValue>\\S+)",
      ],
      depNameTemplate: "fedora",
      datasourceTemplate: "custom.fedora-stable",
    }
  ],
  customDatasources: {
    "fedora-stable": {
      defaultRegistryUrlTemplate: "https://fedoraproject.org/releases.json",
      transformTemplates: [
        "{\"releases\": [{\"version\": $$[0].version}]}",
      ],
    }
  }
}
